<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <section class="main">
    <div id="logo">
      <label for="nav-toggle-cb" id="nav-toggle">&#9776;&nbsp;&nbsp;Settings</label>
    </div>
    <div id="content">
      <div id="sidebar">
        <!-- <input type="checkbox" id="nav-toggle-cb" checked="checked"> -->
        <!-- Hide sidebar when loaded -->
        <input type="checkbox" id="nav-toggle-cb">
        <nav id="menu">


          <div class="input-group" id="framesize-group">
            <label for="framesize">Resolution</label>
            <select id="framesize" class="default-action">
              <!-- 2MP -->
              <!-- <option value="13">UXGA(1600x1200)</option>
              <option value="12">SXGA(1280x1024)</option>
              <option value="11">HD(1280x720)</option>
              <option value="10">XGA(1024x768)</option> -->
              <option value="9">SVGA(800x600)</option>
              <option value="8">VGA(640x480)</option>
              <option value="7">HVGA(480x320)</option>
              <option value="6">CIF(400x296)</option>
              <option value="5">QVGA(320x240)</option>
              <!-- <option value="4">240x240</option>
              <option value="3">HQVGA(240x176)</option>
              <option value="2">QCIF(176x144)</option>
              <option value="1">QQVGA(160x120)</option>
              <option value="0">96x96</option> -->
            </select>
          </div>

          <div class="input-group" id="quality-group">
            <label for="quality">Quality</label>
            <div class="range-min">4</div>
            <input type="range" id="quality" min="4" max="63" value="10" class="default-action">
            <div class="range-max">63</div>
          </div>

          <div class="input-group" id="brightness-group">
            <label for="brightness">Brightness</label>
            <div class="range-min">-2</div>
            <input type="range" id="brightness" min="-2" max="2" value="0" class="default-action">
            <div class="range-max">2</div>
          </div>


          <!-- Toggle stream -->
          <section id="buttons">
            <button id="toggle-stream">Start Stream</button>
          </section>


          <div style="margin-top: 8px;">
          </div>
          <hr style="width:100%">
          <label for="nav-toggle-2640pll" class="toggle-section-label">&#9776;&nbsp;&nbsp;Advanced
            Settings</label><input type="checkbox" id="nav-toggle-2640pll" class="hidden toggle-section-button"
            checked="checked">
          <section class="toggle-section">

            <div class="input-group" id="aec_value-group">
              <label for="aec_value">Exposure</label>
              <div class="range-min">0</div>
              <input type="range" id="aec_value" min="0" max="1200" value="204" class="default-action">
              <div class="range-max">1200</div>
            </div>

            <section id="xclk-section" class="nothidden">
              <div class="input-group" id="set-xclk-group">
                <label for="set-xclk">XCLK MHz</label>
                <div class="text">
                  <input id="xclk" type="text" minlength="1" maxlength="2" size="2" value="20">
                </div>
                <button class="inline-button" id="set-xclk">Set</button>
              </div>
            </section>

            <div class="input-group" id="awb-group">
              <label for="awb">AWB</label>
              <div class="switch">
                <input id="awb" type="checkbox" class="default-action" checked="checked">
                <label class="slider" for="awb"></label>
              </div>
            </div>

            <div class="input-group" id="aec-group">
              <label for="aec">AEC SENSOR</label>
              <div class="switch">
                <input id="aec" type="checkbox" class="default-action" checked="checked">
                <label class="slider" for="aec"></label>
              </div>
            </div>

            <div class="input-group" id="aec2-group">
              <label for="aec2">AEC DSP</label>
              <div class="switch">
                <input id="aec2" type="checkbox" class="default-action" checked="checked">
                <label class="slider" for="aec2"></label>
              </div>
            </div>

            <div class="input-group" id="agc-group">
              <label for="agc">AGC</label>
              <div class="switch">
                <input id="agc" type="checkbox" class="default-action" checked="checked">
                <label class="slider" for="agc"></label>
              </div>
            </div>

            <div class="input-group" id="wpc-group">
              <label for="wpc">WPC</label>
              <div class="switch">
                <input id="wpc" type="checkbox" class="default-action" checked="checked">
                <label class="slider" for="wpc"></label>
              </div>
            </div>

            <div class="input-group" id="led-group">
              <label for="led_intensity">LED Intensity</label>
              <div class="range-min">0</div>
              <input type="range" id="led_intensity" min="0" max="255" value="0" class="default-action">
              <div class="range-max">255</div>
            </div>

            <div class="input-group" id="ae_level-group">
              <label for="ae_level">AE Level</label>
              <div class="range-min">-2</div>
              <input type="range" id="ae_level" min="-2" max="2" value="0" class="default-action">
              <div class="range-max">2</div>
            </div>
          </section>

          <div class="input-group hidden" id="agc_gain-group">
            <label for="agc_gain">Gain</label>
            <div class="range-min">1x</div>
            <input type="range" id="agc_gain" min="0" max="30" value="5" class="default-action">
            <div class="range-max">31x</div>
          </div>

        </nav>
      </div>

      <figure>
        <div id="stream-container" class="image-container ">
          <img id="stream" src="/stream" crossorigin>
        </div>
      </figure>
    </div>
  </section>
  
  <script>
    window.addEventListener('load', onLoad)
    function onLoad(event) {
      baseHost = document.location.origin
      streamUrl = baseHost

      view = document.getElementById('stream')
      viewContainer = document.getElementById('stream-container')

      initButton();
    }
    function initButton() {
      document.getElementById('toggle-stream').addEventListener('click', toggle_stream)
    }
    function toggle_stream(){
      console.log("Toggle clicked")
      console.log(streamUrl)

      view.src = `${streamUrl}/stream`
    }
  </script>
  
</body>
</html>